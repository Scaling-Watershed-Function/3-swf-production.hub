<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.2.335">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Literature Review</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1.6em;
  vertical-align: middle;
}
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<script src="our_knowledge_base_files/libs/clipboard/clipboard.min.js"></script>
<script src="our_knowledge_base_files/libs/quarto-html/quarto.js"></script>
<script src="our_knowledge_base_files/libs/quarto-html/popper.min.js"></script>
<script src="our_knowledge_base_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="our_knowledge_base_files/libs/quarto-html/anchor.min.js"></script>
<link href="our_knowledge_base_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="our_knowledge_base_files/libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="our_knowledge_base_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="our_knowledge_base_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="our_knowledge_base_files/libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">


</head>

<body class="fullcontent">

<div id="quarto-content" class="page-columns page-rows-contents page-layout-article">

<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Literature Review</h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  

</header>

<section id="high-level-literature-review-with-ai-research-rabbit-and-text-analysis" class="level2">
<h2 class="anchored" data-anchor-id="high-level-literature-review-with-ai-research-rabbit-and-text-analysis">High-Level Literature Review with AI (Research Rabbit) and Text Analysis</h2>
<section id="working-on-research-rabbit" class="level3">
<h3 class="anchored" data-anchor-id="working-on-research-rabbit">Working on Research Rabbit</h3>
<section id="what-is-research-rabbit" class="level4">
<h4 class="anchored" data-anchor-id="what-is-research-rabbit">What is Research Rabbit?</h4>
<p><a href="https://www.researchrabbit.ai/">Research Rabbit</a> was created by a small team (three engineers) that decided to provide researchers with a tool to organize <em>visually (yeah!)</em>, literature searches using A.I. There are many other online tools with similar (or even more advanced) features. Yet, the distinguishing element of Research Rabbit is that it is free to everyone.</p>
</section>
<section id="how-to-use-research-rabbit" class="level4">
<h4 class="anchored" data-anchor-id="how-to-use-research-rabbit">How to use Research Rabbit?</h4>
<p>You can use Research Rabbit entirely online or as a desktop app. <a href="https://www.youtube.com/watch?v=7yTs-jZygE0&amp;ab_channel=ScienceGradSchoolCoach">This is a short tutorial that will take you through the basics</a>. If you want to install the desktop app, you can follow these steps:</p>
<ol type="1">
<li>[Download the web catalog app](https://webcatalog.io/en/) and install it on your system (either Mac or PC)</li>
<li>Launch the app, look for Research Rabbit, and click on Install</li>
<li>Once installed, open the app.</li>
<li>Sign up to have a user account. I recommend using the same email address you have for Zotero and GitHub.</li>
<li>You can import Zotero collections directly into research rabbit, but we will start a new collection for this quick tutorial.</li>
<li>Name the new collection (be as specific as possible, so you can quickly recognize it on a quick search). Hit enter, and you can start adding papers to it.</li>
<li>You can add papers directly from the web using “All Subject Areas.”</li>
<li>Start building your collection and select papers based on earlier/later work. For building an initial background, I suggest using earlier work.</li>
<li>Once you build your collection, select all papers and export the file as a BibTeX or CSV</li>
</ol>
</section>
<section id="your-turn" class="level4">
<h4 class="anchored" data-anchor-id="your-turn">Your turn!</h4>
<p>Launch Research Rabbit and start a collection with the topic of your preference. Your collection should start with a few paper-seeds (2-4). From there, you will literally go down the rabbit’s hole, but visually adding papers to your collection as you find them in strategic locations in the growing network of connected papers. Once you are done, download your collection as an csv file and put it into a new folder in your desktop. Name this folder wherever you want, but keep in mind that we will use it as a working directory for the next part.</p>
</section>
</section>
</section>
<section id="beyond-citation-networks" class="level2">
<h2 class="anchored" data-anchor-id="beyond-citation-networks">Beyond citation networks</h2>
<p>Let’s start our analysis by creating an Rproject. Open R studio, and create a new project. To do so: 1. Place your cursor at the top right corner, 2. Click on the drop down tiny arrow and select New Project 3. Choose “On an Existing Working Directory” and browse to the location of the folder where you stored your csv file.</p>
<p>Now that we are in our working directory, you should be able to see the csv file on the “Files” tab on the bottom right panel.</p>
<p>O.k. let’s run some code chunks.</p>
<p>If you have never used librarian, run this first line of code:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="co"># install.packages("librarian")</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>What librarian does is to call for packages within our library and if it cannot find them, it install these packages in your library and call them into your current environment.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="fu">require</span>(librarian)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Loading required package: librarian</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: package 'librarian' was built under R version 4.2.3</code></pre>
</div>
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a>librarian<span class="sc">::</span><span class="fu">shelf</span>(plyr, tidytext, tidyverse,</span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>                 widyr,igraph, ggraph,</span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a>                 wordcloud, reshape2, graphlayouts,</span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a>                 pluralize, quanteda, qgraph, cowplot, readr,</span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a>                 ggwordcloud,tm, plotly)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>
  The 'cran_repo' argument in shelf() was not set, so it will use
  cran_repo = 'https://cran.r-project.org' by default.

  To avoid this message, set the 'cran_repo' argument to a CRAN
  mirror URL (see https://cran.r-project.org/mirrors.html) or set
  'quiet = TRUE'.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in .recacheSubclasses(def@className, def, env): undefined subclass
"unpackedMatrix" of class "mMatrix"; definition not updated</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in .recacheSubclasses(def@className, def, env): undefined subclass
"unpackedMatrix" of class "replValueSp"; definition not updated</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: package 'plotly' was built under R version 4.2.3</code></pre>
</div>
</div>
<section id="our-data." class="level3">
<h3 class="anchored" data-anchor-id="our-data.">Our data.</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="co"># t_df &lt;- read_csv("your_lit_review_file.csv", show_col_types=FALSE)</span></span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a>assets_pubs <span class="ot">&lt;-</span> <span class="st">"../1-swf-knowledge.base/assets/data/raw"</span> </span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a>t_df <span class="ot">&lt;-</span> <span class="fu">as_tibble</span>(<span class="fu">read_csv</span>(<span class="fu">paste</span>(assets_pubs,<span class="st">"230321_research_rabbit_scaling_pubs.csv"</span>,<span class="at">sep=</span><span class="st">'/'</span>),<span class="at">show_col_types =</span> <span class="cn">FALSE</span>))</span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a>t_df</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 104 × 8
   DOI                          PMID arXiv…¹ Title Abstr…² Authors Journal  Year
   &lt;chr&gt;                       &lt;dbl&gt; &lt;lgl&gt;   &lt;chr&gt; &lt;chr&gt;   &lt;chr&gt;   &lt;chr&gt;   &lt;dbl&gt;
 1 10.1002/eco.2390          NA      NA      Drou… Interm… Romain… Ecohyd…  2021
 2 10.1007/s10661-013-3247-7  2.38e7 NA      Biog… The Bo… Norber… Enviro…  2013
 3 10.1002/hyp.14514         NA      NA      Grou… Stream… Jacob … Hydrol…  2022
 4 10.1007/s10533-018-0426-1 NA      NA      Hydr… Headwa… Erin C… Biogeo…  2018
 5 10.5194/hess-2020-10      NA      NA      Eval… Abstra… Songya… Hydrol…  2020
 6 10.1111/j.1365-2427.2009… NA      NA      Emer… SUMMAR… Scott … Freshw…  2010
 7 10.1029/2021jg006654      NA      NA      Spat… While … Kyongh… Journa…  2022
 8 10.1038/s41467-022-28630…  3.53e7 NA      Supe… River … Wilfre… Nature…  2022
 9 10.1126/science.284.5420…  1.04e7 NA      The … Fracta… Geoffr… Science  1999
10 10.1029/2022wr034062      NA      NA      A Ne… &lt;NA&gt;    Pier L… Water …  2023
# … with 94 more rows, and abbreviated variable names ¹​`arXiv ID`, ²​Abstract</code></pre>
</div>
</div>
<p>For our analyses below, we won’t need DOIs, PMIDs or arXiv IDs. We will focus on Title, Abstract, Authors, Journal, Year. To keep column names formatting simple, I use lowercase and spaces are added with (_) when needed.</p>
<p>Since research rabbit pulls information from multiple databases, in some cases is possible that the abstracts for the papers are not retrieved. In such cases, the value returned would be NA (which is read as a character string and not as the typical NA). It could also happen that the abstracts could be partially retrieved. To filter these cases out, we will add another column to the data frame to count the character length of each abstract, and remove those that are less than 20 characters long. Finally, we will add a sequential id and make it a factor for visualization purposes.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a>t_df_c <span class="ot">&lt;-</span> t_df <span class="sc">%&gt;%</span> </span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(Title,Abstract,Authors,Journal,Year) <span class="sc">%&gt;%</span> </span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename</span>(<span class="at">title =</span> Title,</span>
<span id="cb12-4"><a href="#cb12-4" aria-hidden="true" tabindex="-1"></a>         <span class="at">abstract =</span> Abstract,</span>
<span id="cb12-5"><a href="#cb12-5" aria-hidden="true" tabindex="-1"></a>         <span class="at">authors =</span> Authors,</span>
<span id="cb12-6"><a href="#cb12-6" aria-hidden="true" tabindex="-1"></a>         <span class="at">journal =</span> Journal,</span>
<span id="cb12-7"><a href="#cb12-7" aria-hidden="true" tabindex="-1"></a>         <span class="at">year =</span> Year) <span class="sc">%&gt;%</span> </span>
<span id="cb12-8"><a href="#cb12-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">abstract_lenght =</span> <span class="fu">nchar</span>(abstract)) <span class="sc">%&gt;%</span> </span>
<span id="cb12-9"><a href="#cb12-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(abstract_lenght <span class="sc">&gt;</span> <span class="dv">20</span>)</span>
<span id="cb12-10"><a href="#cb12-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-11"><a href="#cb12-11" aria-hidden="true" tabindex="-1"></a>t_df_c <span class="ot">&lt;-</span> t_df_c<span class="sc">%&gt;%</span> </span>
<span id="cb12-12"><a href="#cb12-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">id =</span> <span class="fu">seq</span>(<span class="at">from =</span><span class="dv">1</span>, <span class="at">to=</span> <span class="fu">nrow</span>(t_df_c),<span class="at">by=</span><span class="dv">1</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb12-13"><a href="#cb12-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">id =</span> <span class="fu">factor</span>(id))</span>
<span id="cb12-14"><a href="#cb12-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-15"><a href="#cb12-15" aria-hidden="true" tabindex="-1"></a>t_df_c</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 96 × 7
   title                             abstr…¹ authors journal  year abstr…² id   
   &lt;chr&gt;                             &lt;chr&gt;   &lt;chr&gt;   &lt;chr&gt;   &lt;dbl&gt;   &lt;int&gt; &lt;fct&gt;
 1 Drought in intermittent river an… Interm… Romain… Ecohyd…  2021    1558 1    
 2 Biogeochemical patterns in a riv… The Bo… Norber… Enviro…  2013    1768 2    
 3 Groundwater‐stream connectivity … Stream… Jacob … Hydrol…  2022    1685 3    
 4 Hydrologic and biogeochemical dr… Headwa… Erin C… Biogeo…  2018    1278 4    
 5 Evaluating a landscape-scale dai… Abstra… Songya… Hydrol…  2020    2091 5    
 6 Emerging concepts in temporary‐r… SUMMAR… Scott … Freshw…  2010    2515 6    
 7 Spatial microbial respiration va… While … Kyongh… Journa…  2022    1745 7    
 8 Superlinear scaling of riverine … River … Wilfre… Nature…  2022    1341 8    
 9 The Fourth Dimension of Life: Fr… Fracta… Geoffr… Science  1999     657 9    
10 Toward a metabolic theory of eco… Metabo… James … Ecology  2004    1351 10   
# … with 86 more rows, and abbreviated variable names ¹​abstract,
#   ²​abstract_lenght</code></pre>
</div>
</div>
</section>
<section id="data-cleansing" class="level3">
<h3 class="anchored" data-anchor-id="data-cleansing">Data cleansing</h3>
<p>To make sure all words are processed correctly, we need to do some additional cleaning on the text data. That includes un-nesting each publication component (pub_comp) into tokens (i.e.&nbsp;single words), performing the cleaning tasks (i.e.&nbsp;singularizing,removing punctuation and digits, removing stop words (a, an, by, …)), and finally putting the tokens back together (i.e.&nbsp;nesting)</p>
<p>How to unnest and nest text data in using tidytext? check this post: https://stackoverflow.com/questions/49118539/opposite-of-unnest-tokens-in-r</p>
<section id="choosing-analysis-level" class="level4">
<h4 class="anchored" data-anchor-id="choosing-analysis-level">Choosing analysis level</h4>
<p>You can choose the publication component (pub_comp) you want to focus your analysis on. In this case, our options are title or abstract</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a>pub_comp <span class="ot">=</span> <span class="st">"title"</span></span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-3"><a href="#cb14-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Preparing the data</span></span>
<span id="cb14-4"><a href="#cb14-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-5"><a href="#cb14-5" aria-hidden="true" tabindex="-1"></a>pub_comp_c <span class="ot">&lt;-</span> <span class="fu">select</span>(t_df_c,<span class="fu">all_of</span>(<span class="sc">!!</span><span class="fu">paste</span>(pub_comp))) <span class="sc">%&gt;%</span></span>
<span id="cb14-6"><a href="#cb14-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename</span>(<span class="at">pub_comp_words =</span> pub_comp) <span class="sc">%&gt;%</span> </span>
<span id="cb14-7"><a href="#cb14-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">unnest_tokens</span>(<span class="at">output =</span> word, <span class="at">input =</span> pub_comp_words, <span class="at">drop =</span> <span class="cn">FALSE</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb14-8"><a href="#cb14-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rowwise</span>() <span class="sc">%&gt;%</span> <span class="fu">mutate</span>(<span class="at">word =</span> <span class="fu">tolower</span>(word)) <span class="sc">%&gt;%</span> </span>
<span id="cb14-9"><a href="#cb14-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rowwise</span>() <span class="sc">%&gt;%</span> <span class="fu">mutate</span>(<span class="at">word =</span> <span class="fu">if_else</span>(word <span class="sc">==</span> <span class="st">"data"</span>,<span class="st">"data"</span>,<span class="fu">singularize</span>(word))) <span class="sc">%&gt;%</span>  </span>
<span id="cb14-10"><a href="#cb14-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">str_detect</span>(word, <span class="st">"[:punct:]|[:digit:]"</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb14-11"><a href="#cb14-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span>word <span class="sc">%in%</span> <span class="fu">c</span>(stop_words<span class="sc">$</span>word)) <span class="sc">%&gt;%</span> </span>
<span id="cb14-12"><a href="#cb14-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">nest</span>(word) <span class="sc">%&gt;%</span> </span>
<span id="cb14-13"><a href="#cb14-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="sc">!!</span><span class="fu">paste0</span>(pub_comp) <span class="sc">:</span><span class="er">=</span> <span class="fu">map_chr</span>(<span class="fu">map</span>(data, unlist), paste, <span class="at">collapse =</span> <span class="st">" "</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: All elements of `...` must be named.
Did you want `data = word`?</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Note: Using an external vector in selections is ambiguous.
ℹ Use `all_of(pub_comp)` instead of `pub_comp` to silence this message.
ℹ See &lt;https://tidyselect.r-lib.org/reference/faq-external-vector.html&gt;.
This message is displayed once per session.</code></pre>
</div>
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Combining our original data frames for text analysis</span></span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-3"><a href="#cb17-3" aria-hidden="true" tabindex="-1"></a>t_df_c_m <span class="ot">&lt;-</span> t_df_c <span class="sc">%&gt;%</span> </span>
<span id="cb17-4"><a href="#cb17-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(year,authors,journal)</span>
<span id="cb17-5"><a href="#cb17-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-6"><a href="#cb17-6" aria-hidden="true" tabindex="-1"></a>pub_comp_m <span class="ot">&lt;-</span> <span class="fu">select</span>(pub_comp_c,<span class="sc">!!</span><span class="fu">paste0</span>(pub_comp))</span>
<span id="cb17-7"><a href="#cb17-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-8"><a href="#cb17-8" aria-hidden="true" tabindex="-1"></a>pub_dat <span class="ot">&lt;-</span> <span class="fu">as_tibble</span>(<span class="fu">cbind</span>(pub_comp_m,t_df_c_m))</span>
<span id="cb17-9"><a href="#cb17-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-10"><a href="#cb17-10" aria-hidden="true" tabindex="-1"></a>pub_dat</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 96 × 4
   title                                                    year authors journal
   &lt;chr&gt;                                                   &lt;dbl&gt; &lt;chr&gt;   &lt;chr&gt;  
 1 drought intermittent river ephemeral stream network      2021 Romain… Ecohyd…
 2 biogeochemical pattern river network land gradient       2013 Norber… Enviro…
 3 groundwater stream connectivity minute month united ba…  2022 Jacob … Hydrol…
 4 hydrologic biogeochemical driver dissolved organic car…  2018 Erin C… Biogeo…
 5 evaluating landscape scale daily water balance model s…  2020 Songya… Hydrol…
 6 emerging concept temporary river ecology                 2010 Scott … Freshw…
 7 spatial microbial respiration variation hyporheic zone…  2022 Kyongh… Journa…
 8 superlinear scaling riverine biogeochemical function w…  2022 Wilfre… Nature…
 9 fourth dimension life fractal geometry allometric scal…  1999 Geoffr… Science
10 metabolic theory ecology                                 2004 James … Ecology
# … with 86 more rows</code></pre>
</div>
</div>
</section>
<section id="tokenization" class="level4">
<h4 class="anchored" data-anchor-id="tokenization">Tokenization</h4>
<p>Our first step to analyze the selected publication component, is to break it into individual words (or tokens) and store the tokens in a new data frame for (pub_tokens). There are several packages you could use to tokenize a piece of text, here we will use the tidytext package for most of our analysis.</p>
<p>What the following chunk of code does is: 1) call the pub_dat dataset, 2) break the chunk of (nested) text into tokens (output = word) by using the function un-nest_tokens(), 3) eliminating duplicated words with distinct(), 4) grouping the tokens (word) by years, 5) calculating the frequency of a given token in each year -count(), and adding a new column with the number of characters -nchar for each token, so we can filter monosyllables.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a>pub_tokens <span class="ot">&lt;-</span> pub_dat <span class="sc">%&gt;%</span> </span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">unnest_tokens</span>(<span class="at">output =</span> word, <span class="at">input =</span> pub_comp, <span class="at">drop =</span> <span class="cn">FALSE</span>)<span class="sc">%&gt;%</span></span>
<span id="cb19-3"><a href="#cb19-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">distinct</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb19-4"><a href="#cb19-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(year) <span class="sc">%&gt;%</span> </span>
<span id="cb19-5"><a href="#cb19-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>(word, <span class="at">sort =</span> <span class="cn">TRUE</span>) <span class="sc">%&gt;%</span></span>
<span id="cb19-6"><a href="#cb19-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">length =</span> <span class="fu">nchar</span>(word)) <span class="sc">%&gt;%</span> </span>
<span id="cb19-7"><a href="#cb19-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(length<span class="sc">&gt;</span><span class="dv">2</span>) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<section id="time-indexed-wordclouds" class="level5">
<h5 class="anchored" data-anchor-id="time-indexed-wordclouds">Time-indexed wordclouds</h5>
<p>Low values for res_plot, correspond to lower number of words used and viceversa.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a>res_plot <span class="ot">&lt;-</span> <span class="fl">0.2</span></span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-3"><a href="#cb20-3" aria-hidden="true" tabindex="-1"></a>depth <span class="ot">&lt;-</span> res_plot<span class="sc">*</span><span class="fu">nrow</span>(pub_tokens)</span>
<span id="cb20-4"><a href="#cb20-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-5"><a href="#cb20-5" aria-hidden="true" tabindex="-1"></a>p <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(pub_tokens[<span class="fu">c</span>(<span class="dv">1</span><span class="sc">:</span>depth),], </span>
<span id="cb20-6"><a href="#cb20-6" aria-hidden="true" tabindex="-1"></a>            <span class="fu">aes</span>(<span class="at">x =</span> year,</span>
<span id="cb20-7"><a href="#cb20-7" aria-hidden="true" tabindex="-1"></a>                <span class="at">y =</span> n,</span>
<span id="cb20-8"><a href="#cb20-8" aria-hidden="true" tabindex="-1"></a>                <span class="at">label =</span> word, </span>
<span id="cb20-9"><a href="#cb20-9" aria-hidden="true" tabindex="-1"></a>                <span class="at">size =</span> n, </span>
<span id="cb20-10"><a href="#cb20-10" aria-hidden="true" tabindex="-1"></a>                <span class="at">color =</span> <span class="fu">as.factor</span> (year))) <span class="sc">+</span></span>
<span id="cb20-11"><a href="#cb20-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_text_wordcloud</span>(<span class="at">area_corr_power =</span> <span class="dv">1</span>) <span class="sc">+</span></span>
<span id="cb20-12"><a href="#cb20-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_radius</span>(<span class="at">range =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">25</span>),</span>
<span id="cb20-13"><a href="#cb20-13" aria-hidden="true" tabindex="-1"></a>               <span class="at">limits =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="cn">NA</span>)) <span class="sc">+</span></span>
<span id="cb20-14"><a href="#cb20-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_log10</span>()<span class="sc">+</span></span>
<span id="cb20-15"><a href="#cb20-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">xlab</span>(<span class="st">"Year"</span>)<span class="sc">+</span></span>
<span id="cb20-16"><a href="#cb20-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ylab</span>(<span class="st">"Frequency (n)"</span>)<span class="sc">+</span></span>
<span id="cb20-17"><a href="#cb20-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>()</span>
<span id="cb20-18"><a href="#cb20-18" aria-hidden="true" tabindex="-1"></a>p</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="our_knowledge_base_files/figure-html/unnamed-chunk-7-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</section>
<section id="conceptual-maps-from-n-grams" class="level5">
<h5 class="anchored" data-anchor-id="conceptual-maps-from-n-grams">Conceptual maps from n-grams</h5>
<section id="creating-a-dataframe-for-n-grams" class="level6">
<h6 class="anchored" data-anchor-id="creating-a-dataframe-for-n-grams">Creating a dataframe for n-grams</h6>
<div class="cell">
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a>gram_l <span class="ot">=</span> <span class="dv">2</span></span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a>breath <span class="ot">=</span> <span class="dv">200</span></span>
<span id="cb21-3"><a href="#cb21-3" aria-hidden="true" tabindex="-1"></a>time_window <span class="ot">=</span> <span class="dv">2018</span></span>
<span id="cb21-4"><a href="#cb21-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-5"><a href="#cb21-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-6"><a href="#cb21-6" aria-hidden="true" tabindex="-1"></a>n_gram <span class="ot">&lt;-</span> <span class="fu">paste</span>(gram_l,<span class="st">"gram"</span>,<span class="at">sep=</span><span class="st">'-'</span>)</span>
<span id="cb21-7"><a href="#cb21-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-8"><a href="#cb21-8" aria-hidden="true" tabindex="-1"></a>a <span class="ot">&lt;-</span> <span class="fu">seq</span>(<span class="dv">1</span><span class="sc">:</span>gram_l)</span>
<span id="cb21-9"><a href="#cb21-9" aria-hidden="true" tabindex="-1"></a>b <span class="ot">&lt;-</span> <span class="fu">rep</span>(<span class="st">"word"</span>,<span class="at">times=</span>gram_l)</span>
<span id="cb21-10"><a href="#cb21-10" aria-hidden="true" tabindex="-1"></a>columns <span class="ot">&lt;-</span> <span class="fu">paste</span>(b,a,<span class="at">sep =</span> <span class="st">''</span>)</span>
<span id="cb21-11"><a href="#cb21-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-12"><a href="#cb21-12" aria-hidden="true" tabindex="-1"></a>pub_ngrams <span class="ot">&lt;-</span> pub_dat <span class="sc">%&gt;%</span></span>
<span id="cb21-13"><a href="#cb21-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>() <span class="sc">%&gt;%</span></span>
<span id="cb21-14"><a href="#cb21-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">unnest_tokens</span>(n_gram, pub_comp, <span class="at">token =</span> <span class="st">"ngrams"</span>, <span class="at">n =</span> gram_l) <span class="sc">%&gt;%</span></span>
<span id="cb21-15"><a href="#cb21-15" aria-hidden="true" tabindex="-1"></a>  <span class="co"># separate(n_gram, columns, sep = " ", remove = FALSE) %&gt;%</span></span>
<span id="cb21-16"><a href="#cb21-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(year) <span class="sc">%&gt;%</span> </span>
<span id="cb21-17"><a href="#cb21-17" aria-hidden="true" tabindex="-1"></a>  <span class="co"># count(across(all_of(columns), ~.x), sort = TRUE) %&gt;%</span></span>
<span id="cb21-18"><a href="#cb21-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>(n_gram, <span class="at">sort =</span> <span class="cn">TRUE</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb21-19"><a href="#cb21-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">rank =</span> <span class="fu">row_number</span>(),</span>
<span id="cb21-20"><a href="#cb21-20" aria-hidden="true" tabindex="-1"></a>         <span class="at">total =</span> <span class="fu">sum</span>(n),</span>
<span id="cb21-21"><a href="#cb21-21" aria-hidden="true" tabindex="-1"></a>         <span class="at">t_freq =</span> n<span class="sc">/</span>total)</span>
<span id="cb21-22"><a href="#cb21-22" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(pub_ngrams)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 6
# Groups:   year [3]
   year n_gram                 n  rank total t_freq
  &lt;dbl&gt; &lt;chr&gt;              &lt;int&gt; &lt;int&gt; &lt;int&gt;  &lt;dbl&gt;
1  2021 intermittent river     5     1   111 0.0450
2  2021 ephemeral stream       4     2   111 0.0360
3  2021 river ephemeral        4     3   111 0.0360
4  2007 carbon cycle           2     1    20 0.1   
5  2007 global carbon          2     2    20 0.1   
6  2009 lake reservoir         2     1    49 0.0408</code></pre>
</div>
</div>
</section>
</section>
<section id="plotting-our-map" class="level5">
<h5 class="anchored" data-anchor-id="plotting-our-map">Plotting our map</h5>
<div class="cell">
<div class="sourceCode cell-code" id="cb23"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a>ngram_graph <span class="ot">&lt;-</span> pub_ngrams <span class="sc">%&gt;%</span></span>
<span id="cb23-2"><a href="#cb23-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(rank <span class="sc">&lt;</span> breath) <span class="sc">%&gt;%</span></span>
<span id="cb23-3"><a href="#cb23-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(year <span class="sc">&gt;</span> time_window) <span class="sc">%&gt;%</span> </span>
<span id="cb23-4"><a href="#cb23-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">graph_from_data_frame</span>()</span>
<span id="cb23-5"><a href="#cb23-5" aria-hidden="true" tabindex="-1"></a>ngram_graph</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>IGRAPH 89174a9 DN-- 197 203 -- 
+ attr: name (v/c), n (e/n), rank (e/n), total (e/n), t_freq (e/n)
+ edges from 89174a9 (vertex names):
 [1] 2021-&gt;intermittent river    2021-&gt;ephemeral stream     
 [3] 2021-&gt;river ephemeral       2021-&gt;perennial river      
 [5] 2021-&gt;river stream          2021-&gt;stream network       
 [7] 2019-&gt;analysis leached      2019-&gt;carbon chemostasi    
 [9] 2019-&gt;catchment dominant    2019-&gt;chemostasi headwater 
[11] 2019-&gt;dissolved organic     2019-&gt;dominant influence   
[13] 2019-&gt;dynamic stream        2019-&gt;emergent dissolved   
[15] 2019-&gt;ephemeral stream      2019-&gt;event intermittent   
+ ... omitted several edges</code></pre>
</div>
<div class="sourceCode cell-code" id="cb25"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a>p2 <span class="ot">&lt;-</span> <span class="fu">ggraph</span>(ngram_graph,</span>
<span id="cb25-2"><a href="#cb25-2" aria-hidden="true" tabindex="-1"></a>             <span class="at">layout =</span> <span class="st">"fr"</span>)<span class="sc">+</span></span>
<span id="cb25-3"><a href="#cb25-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_edge_link</span>(<span class="fu">aes</span>(<span class="at">edge_alpha =</span> n, <span class="at">edge_width =</span> n), <span class="at">edge_colour =</span> <span class="st">"sienna3"</span>) <span class="sc">+</span></span>
<span id="cb25-4"><a href="#cb25-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_node_point</span>(<span class="at">size =</span> <span class="dv">2</span>) <span class="sc">+</span></span>
<span id="cb25-5"><a href="#cb25-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_node_text</span>(<span class="fu">aes</span>(<span class="at">label =</span> name), <span class="at">repel =</span> <span class="cn">TRUE</span>, </span>
<span id="cb25-6"><a href="#cb25-6" aria-hidden="true" tabindex="-1"></a>                 <span class="at">point.padding =</span> <span class="fu">unit</span>(<span class="fl">0.2</span>, <span class="st">"lines"</span>), <span class="at">size =</span> <span class="fl">2.5</span>) <span class="sc">+</span></span>
<span id="cb25-7"><a href="#cb25-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_void</span>()</span>
<span id="cb25-8"><a href="#cb25-8" aria-hidden="true" tabindex="-1"></a>p2</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: ggrepel: 163 unlabeled data points (too many overlaps). Consider
increasing max.overlaps</code></pre>
</div>
<div class="cell-output-display">
<p><img src="our_knowledge_base_files/figure-html/unnamed-chunk-9-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</section>
</section>
</section>
</section>

</main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    target: function(trigger) {
      return trigger.previousElementSibling;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->



</body></html>